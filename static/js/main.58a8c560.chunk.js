(this["webpackJsonpreact-js"]=this["webpackJsonpreact-js"]||[]).push([[0],{197:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(74),i=n.n(o),a=(n(84),n(85),n(86),n(87),n(12)),s=n(16),u=n(1),f=n.n(u),l=n(79),d=n(4),p=function(e){e.className;var t=e.point,n=(e.onChangeColor,Object(r.useState)(t.colour)),c=Object(s.a)(n,2),o=c[0],i=c[1],a=f()({default:{container:{position:"absolute",left:t.currentXY.x,top:t.currentXY.y},point:{backgroundColor:o}}});Object(r.useEffect)((function(){t.size=[t.ref.current.offsetWidth,t.ref.current.offsetHeight]}));return t.ref=Object(r.useRef)(null),Object(d.jsxs)("div",{style:a.container,children:[Object(d.jsx)("div",{ref:t.ref,style:a.point,className:"dragItem",id:t.id}),t.showPicker&&Object(d.jsx)(l.a,{color:o,onChange:function(e){t.colour=e.hex,i(e.hex)},disableAlpha:!0,presetColors:[]})]})};p.defaultProps={className:"dragItem"};var x=p,v=function(e){var t=e.points,n=(e.onChangeColor,[]);for(var r in t)n.push(Object(d.jsx)(x,{point:t[r]}));return n};var h=function(){var e=Object(r.useState)([{mouseDown:!1,start:{x:0,y:0},end:{x:0,y:0}}]),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)([{ref:null,active:!1,colour:"#f5e663",showPicker:!1,pointerOffset:{x:0,y:0},currentXY:{x:50,y:50},size:[0,0]}]),i=Object(s.a)(o,2),u=i[0],f=i[1],l=function(e){var t;if(n.mouseDown=!0,c(n),"dragPalette"===!(t="touch"===e.pointerType?document.elementFromPoint(e.clientX,e.clientY):e.target).id&&console.log(t),t.classList.contains("dragItem")){var r;for(var o in u)u[o].ref.current===t&&(console.log("now "+o),r=o);console.log("dragStart "+r,u[r]);var i={x:0,y:0};i="touch"===e.type.substr(0,5)?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY},n.start=i,n.end=i,c(n),u[r].pointerOffset.x=i.x-u[r].currentXY.x,u[r].pointerOffset.y=i.y-u[r].currentXY.y,u[r].active=!0,u[r].ref.current.classList.add("active"),u[r].ref.current.parentNode.style.zIndex=1,f(Object(a.a)(u))}},p=function(e){for(var t in u)u[t].showPicker=!1,u[t].ref.current.classList.remove("active");u[e].ref.current.classList.add("active"),f(u)},x=function(){var e=!1;for(var t in u)e=e||u[t].active;return e},h=function(e,t){e.showPicker=t},j=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))<=10};return Object(d.jsx)("div",{className:"App",onPointerDown:function(e){return l(e)},onPointerMove:function(e){return function(e){if(x()){var t;for(var r in u)u[r].active&&(t=r);e.preventDefault();var o={x:0,y:0};o="touch"===e.type.substr(0,5)?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY},n.end=o,c(n),j(n.start,n.end)||(h(u[t],!1),p(t)),u[t].currentXY.x=o.x-u[t].pointerOffset.x,u[t].currentXY.y=o.y-u[t].pointerOffset.y;var i=[[u[t].ref.current.parentNode.parentNode.getBoundingClientRect().left,u[t].ref.current.parentNode.parentNode.getBoundingClientRect().top],[0,0]];i[1]=[i[0][0]+u[t].ref.current.parentNode.parentNode.clientWidth-u[t].size[0],i[0][1]+u[t].ref.current.parentNode.parentNode.clientHeight-u[t].size[1]],u[t].currentXY.x=Math.max(Math.min(u[t].currentXY.x,i[1][0]),i[0][0]),u[t].currentXY.y=Math.max(Math.min(u[t].currentXY.y,i[1][1]),i[0][1]),u[t].ref.current.parentNode.style.left=u[t].currentXY.x,u[t].ref.current.parentNode.style.top=u[t].currentXY.y,f(Object(a.a)(u))}else n.mouseDown&&l(e)}(e)},onPointerUp:function(e){return function(e){var t;for(var r in n.mouseDown=!1,c(n),u)u[r].active&&(t=r);t&&(u[t].pointerOffset.x=u[t].currentXY.x,u[t].pointerOffset.y=u[t].currentXY.y,u[t].ref.current.classList.remove("active"),u[t].active=!1,j(n.start,n.end)&&!u[t].showPicker?(p(t),u[t].ref.current.classList.add("active"),u[t].ref.current.parentNode.style.zIndex=1,h(u[t],!0)):(h(u[t],!1),u[t].ref.current.parentNode.style.zIndex=0),console.log("dragEnd "+t,u[t]),f(Object(a.a)(u)))}()},children:Object(d.jsxs)("div",{id:"outerContainer",children:[Object(d.jsx)("div",{id:"dragPalette",children:Object(d.jsx)(v,{points:u})}),Object(d.jsxs)("div",{id:"point-manager",children:[Object(d.jsx)("button",{className:"button plus",onClick:function(){f([].concat(Object(a.a)(u),[{ref:null,active:!1,colour:"#f5e663",showPicker:!1,pointerOffset:{x:0,y:0},currentXY:{x:50,y:50},size:[0,0]}]))}}),Object(d.jsx)("button",{className:"button minus",onClick:function(){return function(e){var t=e.index;-1===t&&(t=u.length-1),console.log("Removing point with key "+t);var n=u;n.splice(t,1),f(Object(a.a)(n)),console.log("New points are ",u)}({index:-1})}})]})]})})},j=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,199)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),o(e),i(e)}))};i.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(h,{})}),document.getElementById("root")),j()},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){}},[[197,1,2]]]);
//# sourceMappingURL=main.58a8c560.chunk.js.map