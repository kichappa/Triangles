(this["webpackJsonpreact-js"]=this["webpackJsonpreact-js"]||[]).push([[0],{197:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),c=n(74),i=n.n(c),a=(n(84),n(85),n(86),n(87),n(12)),s=n(16),u=n(1),l=n.n(u),f=n(79),d=n(4),p=function(e){e.className;var t=e.point,n=e.onChangeColor,o=Object(r.useState)(t.colour),c=Object(s.a)(o,2),i=c[0],a=c[1];console.log(i[0]);var u=l()({default:{container:{position:"absolute",left:t.currentXY.x,top:t.currentXY.y},point:{backgroundColor:i}}});Object(r.useEffect)((function(){t.size=[t.ref.current.offsetWidth,t.ref.current.offsetHeight]}));return t.ref=Object(r.useRef)(null),Object(d.jsxs)("div",{style:u.container,children:[Object(d.jsx)("div",{ref:t.ref,style:u.point,className:"dragItem",id:t.id}),t.showPicker&&Object(d.jsx)(f.a,{color:i,onChange:function(e){n(e),t.colour=e.hex,a(e.hex)}})]})};p.defaultProps={className:"dragItem"};var x=p,h=function(e){var t=e.points;e.onChangeColor;console.log("Points are ",t);var n=[],r=function(e){n.push(Object(d.jsx)(x,{point:t[e],onChangeColor:function(t){return function(e,t){console.log("Changing color of point "+e+" to ",t)}(e,t)}}))};for(var o in t)r(o);return n};var v=function(){var e=Object(r.useState)([{mouseDown:!1,start:{x:0,y:0},end:{x:0,y:0}}]),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)([{ref:null,active:!1,colour:"#f5e663",showPicker:!1,pointerOffset:{x:0,y:0},currentXY:{x:50,y:50},size:[0,0]}]),i=Object(s.a)(c,2),u=i[0],l=i[1],f=function(e){var t;if(n.mouseDown=!0,o(n),"dragPalette"===!(t="touch"===e.pointerType?document.elementFromPoint(e.clientX,e.clientY):e.target).id&&console.log(t),t.classList.contains("dragItem")){var r;for(var c in u)u[c].ref.current===t&&(console.log("now "+c),r=c);console.log("dragStart "+r,u[r]);var i={x:0,y:0};i="touch"===e.type.substr(0,5)?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY},n.start=i,n.end=i,o(n),console.log("Setting mouseStart",n.start),u[r].pointerOffset.x=i.x-u[r].currentXY.x,u[r].pointerOffset.y=i.y-u[r].currentXY.y,u[r].active=!0,u[r].ref.current.classList.add("active"),u[r].ref.current.parentNode.style.zIndex=1,l(Object(a.a)(u))}},p=function(){var e=!1;for(var t in u)e=e||u[t].active;return e},x=function(e,t){e.showPicker=t},v=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))<=10};return Object(d.jsx)("div",{className:"App",onPointerDown:function(e){return f(e)},onPointerMove:function(e){return function(e){if(p()){var t;for(var r in u)u[r].active&&(t=r);e.preventDefault();var c={x:0,y:0};c="touch"===e.type.substr(0,5)?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY},n.end=c,o(n),v(n.start,n.end)||x(u[t],!1),u[t].currentXY.x=c.x-u[t].pointerOffset.x,u[t].currentXY.y=c.y-u[t].pointerOffset.y;var i=[[u[t].ref.current.parentNode.parentNode.getBoundingClientRect().left,u[t].ref.current.parentNode.parentNode.getBoundingClientRect().top],[0,0]];i[1]=[i[0][0]+u[t].ref.current.parentNode.parentNode.clientWidth-u[t].size[0],i[0][1]+u[t].ref.current.parentNode.parentNode.clientHeight-u[t].size[1]],u[t].currentXY.x=Math.max(Math.min(u[t].currentXY.x,i[1][0]),i[0][0]),u[t].currentXY.y=Math.max(Math.min(u[t].currentXY.y,i[1][1]),i[0][1]),u[t].ref.current.parentNode.style.left=u[t].currentXY.x,u[t].ref.current.parentNode.style.top=u[t].currentXY.y,l(Object(a.a)(u))}else n.mouseDown&&(console.log(e),f(e))}(e)},onPointerUp:function(e){return function(e){var t;for(var r in n.mouseDown=!1,o(n),u)u[r].active&&(t=r);t&&(u[t].pointerOffset.x=u[t].currentXY.x,u[t].pointerOffset.y=u[t].currentXY.y,u[t].ref.current.classList.remove("active"),u[t].active=!1,console.log(e,u[t].showPicker),v(n.start,n.end)&&!u[t].showPicker?(u[t].ref.current.classList.add("active"),u[t].ref.current.parentNode.style.zIndex=1,x(u[t],!0)):(x(u[t],!1),u[t].ref.current.parentNode.style.zIndex=0),console.log("dragEnd "+t,u[t]),l(Object(a.a)(u)))}(e)},children:Object(d.jsxs)("div",{id:"outerContainer",children:[Object(d.jsx)("div",{id:"dragPalette",children:Object(d.jsx)(h,{points:u})}),Object(d.jsxs)("div",{id:"point-manager",children:[Object(d.jsx)("button",{className:"button plus",onClick:function(){l([].concat(Object(a.a)(u),[{ref:null,active:!1,colour:"#f5e663",showPicker:!1,pointerOffset:{x:0,y:0},currentXY:{x:50,y:50},size:[0,0]}]))}}),Object(d.jsx)("button",{className:"button minus",onClick:function(){return function(e){var t=e.index;-1===t&&(t=u.length-1),console.log("Removing point with key "+t);var n=u;n.splice(t,1),l(Object(a.a)(n)),console.log("New points are ",u)}({index:-1})}})]})]})})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,199)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),c(e),i(e)}))};i.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(v,{})}),document.getElementById("root")),g()},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){}},[[197,1,2]]]);
//# sourceMappingURL=main.9567a0b6.chunk.js.map